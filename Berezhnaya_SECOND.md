# Ручные тесты для приложения F-Bank (без авторизации)

## Тест-кейс 1: Проверка расчета доступной суммы для перевода с учетом комиссии

**ID:** `FBT-006`  
**Название:** Проверка корректности расчета доступной суммы по формуле: (сумма на счёте — резервная сумма) - комиссия 10%  
**Приоритет:** Высокий  
**Предусловие:** Открыта главная страница приложения F-Bank с параметрами `?balance=30000&reserved=20001`

**Шаги:**
1. Найти на главной странице блок "Рубли"
2. Зафиксировать значения:
   - Сумма на счету: 30000 ₽
   - Резерв: 20001 ₽
3. Рассчитать доступную сумму без комиссии: 30000 - 20001 = 9999 ₽
4. Нажать на рублёвый счёт для открытия меню перевода
5. Ввести номер карты: `1111222233334444`
6. Ввести сумму перевода: `9999 ₽`
7. Зафиксировать отображаемую комиссию
8. Рассчитать фактическую доступную сумму: 9999 - комиссия
9. Проверить максимальную сумму, которую можно перевести

**Ожидаемый результат:**
- Комиссия 10% от 9999 = 999.9 → округление вниз до 999 ₽
- Доступная сумма для перевода: 9999 - 999 = 9000 ₽

**Фактический результат:**
- Сумма на счету: 30000 ₽ - ВЕРНО
- Резерв: 20001 ₽ - ВЕРНО
- Доступно без комиссии: 9999 ₽ - ВЕРНО
- Комиссия для 9999 ₽: 900 ₽ (вместо 999) - НЕВЕРНО
- Фактическая доступная сумма: 9098 ₽ (вместо 9000) - НЕВЕРНО

**Статус:** Не пройден  
**Комментарий:** Комиссия рассчитывается некорректно - 900 ₽ вместо 999 ₽ для суммы 9999 ₽. Алгоритм расчета комиссии нарушен.  

---

## Тест-кейс 2: Проверка фактической доступной суммы для перевода

**ID:** `FBT-007`  
**Название:** Проверка максимальной суммы, которую можно перевести с учетом комиссии 900 ₽ для 9999 ₽  
**Приоритет:** Высокий  
**Предусловие:** Открыта форма перевода на карту, введен корректный номер карты

**Шаги:**
1. Ввести номер карты: `1111222233334444`
2. Ввести сумму перевода: `9098 ₽`
3. Проверить, активна ли кнопка "Перевести"
4. Очистить поле суммы
5. Ввести сумму перевода: `9099 ₽`
6. Проверить сообщение о недостатке средств
7. Очистить поле суммы
8. Ввести сумму перевода: `9097 ₽`
9. Проверить, активна ли кнопка "Перевести"
10. Проверить отображаемую комиссию для каждой суммы

**Ожидаемый результат:**
- Сумма 9098 ₽ должна приниматься (9999 - 900 = 9098)
- Сумма 9099 ₽ должна отклоняться с сообщением о недостатке средств
- Сумма 9097 ₽ должна приниматься

**Фактический результат:**
- Сумма 9098 ₽: кнопка "Перевести" активна - ВЕРНО
- Сумма 9099 ₽: сообщение "Недостаточно средств" - ВЕРНО
- Сумма 9097 ₽: кнопка "Перевести" активна - ВЕРНО
- Комиссия для 9098 ₽: 900 ₽ - ВЕРНО (но алгоритм расчета неверный)

**Статус:** Частично пройден  
**Комментарий:** Логика проверки доступной суммы работает корректно, но основана на неправильном расчете комиссии

---

## Тест-кейс 3: Проверка расчета комиссии за перевод для различных сумм

**ID:** `FBT-008`  
**Название:** Проверка корректности расчета комиссии 10% для различных сумм перевода  
**Приоритет:** Высокий  
**Предусловие:** Открыта форма перевода на карту, введен корректный номер карты

**Шаги:**
1. Ввести номер карты: `1111222233334444`
2. Ввести сумму перевода: `1000 ₽`
3. Зафиксировать рассчитанную комиссию
4. Очистить поле суммы
5. Ввести сумму перевода: `5000 ₽`
6. Зафиксировать рассчитанную комиссию
7. Очистить поле суммы
8. Ввести сумму перевода: `155 ₽`
9. Зафиксировать рассчитанную комиссию
10. Очистить поле суммы
11. Ввести сумму перевода: `199 ₽`
12. Зафиксировать рассчитанную комиссию
13. Очистить поле суммы
14. Ввести сумму перевода: `100 ₽`
15. Зафиксировать рассчитанную комиссию

**Ожидаемый результат:**
- Для суммы 1000 ₽ комиссия = 100 ₽ (1000 × 0.1 = 100)
- Для суммы 5000 ₽ комиссия = 500 ₽ (5000 × 0.1 = 500)
- Для суммы 155 ₽ комиссия = 15 ₽ (155 × 0.1 = 15.5 → округление вниз до 15)
- Для суммы 199 ₽ комиссия = 19 ₽ (199 × 0.1 = 19.9 → округление вниз до 19)
- Для суммы 100 ₽ комиссия = 10 ₽ (100 × 0.1 = 10)

**Фактический результат:**
- Сумма 1000 ₽: комиссия 100 ₽ - ВЕРНО
- Сумма 5000 ₽: комиссия 500 ₽ - ВЕРНО
- Сумма 155 ₽: комиссия 10 ₽ (вместо 15) - НЕВЕРНО
- Сумма 199 ₽: комиссия 10 ₽ (вместо 19) - НЕВЕРНО
- Сумма 100 ₽: комиссия 10 ₽ - ВЕРНО
- Сумма 9999 ₽: комиссия 900 ₽ (вместо 999) - НЕВЕРНО

**Статус:** Не пройден  
**Комментарий:** Комиссия рассчитывается некорректно для большинства сумм - используется неправильный алгоритм расчета (округление до десятков)  


---

## Тест-кейс 4: Проверка алгоритма округления комиссии

**ID:** `FBT-009`  
**Название:** Выявление паттерна некорректного расчета комиссии  
**Приоритет:** Высокий  
**Предусловие:** Открыта форма перевода на карту, введен корректный номер карты

**Шаги:**
1. Ввести номер карты: `1111222233334444`
2. Ввести сумму перевода: `104 ₽`
3. Зафиксировать комиссию
4. Очистить поле суммы
5. Ввести сумму перевода: `105 ₽`
6. Зафиксировать комиссию
7. Очистить поле суммы
8. Ввести сумму перевода: `109 ₽`
9. Зафиксировать комиссию
10. Очистить поле суммы
11. Ввести сумму перевода: `110 ₽`
12. Зафиксировать комиссию
13. Очистить поле суммы
14. Ввести сумму перевода: `149 ₽`
15. Зафиксировать комиссию

**Ожидаемый результат:**
- Сумма 104 ₽: комиссия 10 ₽ (104 × 0.1 = 10.4 → округление вниз до 10)
- Сумма 105 ₽: комиссия 10 ₽ (105 × 0.1 = 10.5 → округление вниз до 10)
- Сумма 109 ₽: комиссия 10 ₽ (109 × 0.1 = 10.9 → округление вниз до 10)
- Сумма 110 ₽: комиссия 11 ₽ (110 × 0.1 = 11)
- Сумма 149 ₽: комиссия 14 ₽ (149 × 0.1 = 14.9 → округление вниз до 14)

**Фактический результат:**
- Сумма 104 ₽: комиссия 10 ₽ - ВЕРНО
- Сумма 105 ₽: комиссия 10 ₽ - ВЕРНО
- Сумма 109 ₽: комиссия 10 ₽ - ВЕРНО
- Сумма 110 ₽: комиссия 10 ₽ (вместо 11) - НЕВЕРНО
- Сумма 149 ₽: комиссия 10 ₽ (вместо 14) - НЕВЕРНО

**Статус:** Не пройден  
**Комментарий:** Выявлен некорректный алгоритм расчета комиссии - система округляет до ближайшего десятка вниз вместо математического округления вниз  


---

## Тест-кейс 5: Проверка граничных значений и валидации сумм

**ID:** `FBT-010`  
**Название:** Проверка поведения системы при вводе граничных и некорректных сумм перевода  
**Приоритет:** Высокий  
**Предусловие:** Открыта форма перевода на карту, введен корректный номер карты

**Шаги:**
1. Ввести номер карты: `1111222233334444`
2. Ввести сумму перевода: `0 ₽`
3. Проверить поведение системы и комиссию
4. Очистить поле суммы
5. Ввести сумму перевода: `-100 ₽`
6. Проверить поведение системы
7. Очистить поле суммы
8. Ввести сумму перевода: `1 ₽`
9. Проверить расчет комиссии и возможность перевода
10. Очистить поле суммы
11. Ввести сумму перевода: `9098 ₽` (максимально доступная)
12. Проверить возможность перевода

**Ожидаемый результат:**
- Суммы 0 ₽ и отрицательные суммы не должны приниматься системой
- Сумма 1 ₽ должна приниматься с комиссией 0 ₽ (1 × 0.1 = 0.1 → округление вниз до 0)
- Сумма 9098 ₽ должна приниматься

**Фактический результат:**
- Сумма 0 ₽: система принимает и показывает комиссию 0 ₽ - ВЕРНО (но не должна принимать 0 ₽)
- Сумма -100 ₽: система принимает отрицательное значение - НЕВЕРНО
- Сумма 1 ₽: комиссия 0 ₽ - ВЕРНО
- Сумма 9098 ₽: принимается корректно - ВЕРНО

**Статус:** Не пройден  
**Комментарий:** Критическая уязвимость: система позволяет вводить нулевые и отрицательные суммы. Комиссия для 0 ₽ рассчитывается верно (0 ₽), но система не должна принимать нулевые переводы.  

---

## Итоги тестирования

**Всего тестов:** 5  
**Пройдено:** 0 (0%)  
**Частично пройдено:** 1 (20%)  
**Не пройдено:** 4 (80%)  

**Критические проблемы:**
1. **Некорректный расчет комиссии** - для суммы 9999 ₽ комиссия 900 ₽ вместо 999 ₽
2. **Неправильный алгоритм округления** - комиссия округляется до десятков вместо математического округления вниз
3. **Отсутствует валидация сумм** - система принимает нулевые и отрицательные суммы
4. **Неконсистентный расчет** - для сумм 155 ₽ и 199 ₽ комиссия 10 ₽ вместо 15 ₽ и 19 ₽

**Выявленный паттерн ошибки:**
Система использует алгоритм округления до ближайшего десятка вниз вместо математического округления вниз:
- 155 ₽ → 15.5 → должно быть 15, но система показывает 10
- 199 ₽ → 19.9 → должно быть 19, но система показывает 10  
- 9999 ₽ → 999.9 → должно быть 999, но система показывает 900

**Рекомендации:**
1. **СРОЧНО** исправить алгоритм расчета комиссии - использовать математическое округление вниз
2. Для суммы 9999 ₽ комиссия должна быть 999 ₽, а не 900 ₽
3. Для суммы 155 ₽ комиссия должна быть 15 ₽, а не 10 ₽
4. Для суммы 199 ₽ комиссия должна быть 19 ₽, а не 10 ₽
5. Добавить валидацию на нулевые и отрицательные суммы перевода